<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>GEOMETRIC CHAOS · FORMULA PULSE + underground.signal</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="referrer" content="no-referrer">
<meta name="robots" content="noindex,nofollow">

<style>
/* ===== GENERAL ===== */
* { margin: 0; padding: 0; box-sizing: border-box; }
html, body { width: 100%; height: 100%; background: #000; font-family: "Courier New", monospace; color: #0af; overflow: hidden; }
canvas { position: fixed; inset: 0; z-index: 0; display: block; }

/* ===== HUD / DATA ===== */
#hud { position:absolute; top:16px; left:16px; font-size:13px; opacity:0.7; pointer-events:none; letter-spacing:1px; }
#data { position:absolute; bottom:16px; left:16px; font-size:10px; opacity:0.6; pointer-events:none; max-width:400px; line-height:1.4; }
#data .real { color:#0f0; font-weight:bold; }
#data .fallback { color:#888; }
#data .warning { color:#ff0; }
#clock { position:absolute; bottom:16px; right:16px; font-size:11px; opacity:0.45; color:#6cf; text-align:right; pointer-events:none; line-height:1.3; }
#status { position:absolute; top:40px; left:16px; font-size:11px; opacity:0.6; color:#0af; }

/* ===== WRAPPER / UI ===== */
.wrapper {
  position: relative;
  z-index: 2;
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 18px;
  text-align: center;
  padding: 20px;
}
.player {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
}
.controls { display: flex; align-items: center; gap: 12px; }
button {
  width: 78px; height: 78px;
  border-radius: 50%; border: 1px solid #4dd2ff;
  background: transparent; color: #4dd2ff; font-size: 26px;
  cursor: pointer; transition: .3s;
}
button:hover { background: rgba(77,210,255,.15); box-shadow: 0 0 22px rgba(77,210,255,.6); }
.volume { display: flex; flex-direction: column; align-items: center; gap: 4px; }
.volume label { font-size: 10px; opacity: 0.6; }
input[type="range"] {
  -webkit-appearance: none; width: 120px; height: 2px;
  background: #4dd2ff; outline: none; opacity: 0.7;
}
input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none; width: 12px; height: 12px; border-radius: 50%;
  background: #4dd2ff; cursor: pointer;
}
.text-block { display: flex; flex-direction: column; gap: 4px; margin-top: 4px; }
.main-text { font-size: 16px; letter-spacing: 1.2px; }
.sub-text { font-size: 13px; letter-spacing: 2px; opacity: 0.9; }
.footer-text { font-size: 10px; letter-spacing: 1px; opacity: 0.45; }
.links { display: flex; flex-direction: column; gap: 10px; margin-top: 10px; align-items: center; }
.row { display: flex; gap: 24px; flex-wrap: wrap; justify-content: center; }
.link a { color: #4dd2ff; text-decoration: none; border-bottom: 1px dotted #4dd2ff; transition: 0.3s; font-size: 14px; }
.link a:hover { opacity: 0.8; border-bottom: 1px solid #4dd2ff; }

/* ===== MAGNETIC STORM ===== */
@keyframes magnetPulse {
  0% { box-shadow: 0 0 0 rgba(77,210,255,0.0); }
  50% { box-shadow: 0 0 18px rgba(77,210,255,0.9); }
  100% { box-shadow: 0 0 0 rgba(77,210,255,0.0); }
}
.magnet-storm { animation: magnetPulse 1.4s infinite; border-bottom: 1px solid #4dd2ff !important; }

@media (max-width: 600px) {
  button { width: 68px; height: 68px; font-size: 24px; }
  .main-text { font-size: 14px; }
  .sub-text { font-size: 12px; }
  .row { gap: 12px; }
}
</style>
</head>

<body>

<!-- GEOMETRIC CHAOS FON -->
<canvas id="chaosCanvas"></canvas>

<!-- UI INTERFACE -->
<div class="wrapper">
  <div class="player">
    <div class="controls">
      <button id="play">▶</button>
      <div class="volume">
        <label>volume</label>
        <input type="range" id="volume" min="0" max="1" step="0.01" value="0.7">
      </div>
    </div>
    <div class="text-block">
      <div class="main-text">radio_underground.signal:off-grid.не для всіх.</div>
      <div class="sub-text">24'7</div>
      <div class="footer-text">ibonarium project 2026 by lavanda audit.january:february:</div>
    </div>
  </div>

  <div class="links">
    <div class="row">
      <div class="link"><a href="https://lavandaaudit.github.io/sun-ibonarium-cosmo-dynamics-lab-live/" target="_blank">sun.ibonarium</a></div>
      <div class="link"><a href="https://lavandaaudit.github.io/ibonarium.planet.radar/" target="_blank">planet.radar</a></div>
      <div class="link"><a href="https://lavandaaudit.github.io/cosmo.dynamics/" target="_blank">moon.ibonarium</a></div>
    </div>
    <div class="row">
      <div class="link"><a href="https://lavandaaudit.github.io/ibonarium.ecology.radar/" target="_blank">ecology.radar</a></div>
      <div class="link"><a href="#" id="translatorLink">.translator</a></div>
      <div class="link"><a href="#" id="magnetLab" onclick="openMagnetLab()">.magnet.lab</a></div>
    </div>
    <div class="row">
      <div class="link"><a href="#" onclick="openCriptoLabLive()">cripto.lab.live</a></div>
      <div class="link"><a href="#" onclick="openSocialLive()">lavanda.soft</a></div>
      <div class="link"><a href="#" onclick="openIbonariumTV()">ibonarium.tv</a></div>
    </div>
    <div class="row">
      <div class="link"><a href="#" onclick="openSolarStability()">solar.stability</a></div>
      <div class="link"><a href="#" onclick="openIModular01()">i.modular.1.3</a></div>
      <div class="link"><a href="#" onclick="openIDrum32()">i.drum.32</a></div>
    </div>
    <div class="row">
      <div class="link"><a href="#" onclick="openEcoSystem()">eco.system</a></div>
      <div class="link"><a href="#" onclick="openOceanLab()">ocean.lab</a></div>
      <div class="link"><a href="#" onclick="openHumanityLab()">humanity.lab</a></div>
    </div>
    <div class="row">
      <div class="link"><a href="#" onclick="openIModularXIII()">i.modularXIII</a></div>
      <div class="link"><a href="#" onclick="openAgroLab()">agro.ua.lab</a></div>
      <div class="link"><a href="#" onclick="openPhGeoLab()">ph.geo.lab</a></div>
    </div>
  </div>
</div>

<!-- AUDIO -->
<audio id="audio" crossorigin="anonymous" preload="none">
  <source src="https://ice1.somafm.com/dronezone-128-mp3">
</audio>

<!-- HUD DATA -->
<div id="hud">GEOMETRIC CHAOS — FORMULA PULSE</div>
<div id="status"></div>
<div id="data">ініціалізація...</div>
<div id="clock">—</div>

<script>
// ================= AUDIO =================
delete navigator.sendBeacon;
if (navigator.connection) navigator.connection.saveData = true;

const audio = document.getElementById("audio");
const playBtn = document.getElementById("play");
const volume = document.getElementById("volume");
let playing = false;

volume.oninput = () => audio.volume = volume.value;
playBtn.onclick = () => {
  if (!playing) { audio.volume = volume.value; audio.play(); playBtn.textContent = "■"; playing = true; fullscreen(); }
  else { audio.pause(); playBtn.textContent = "▶"; playing = false; }
};
function fullscreen(){ const el=document.documentElement; if(el.requestFullscreen) el.requestFullscreen().catch(()=>{}); }

// ================= STARS UI =================
const starCanvas = document.getElementById("stars");
if(starCanvas){
  const s = starCanvas.getContext("2d");
  let W,H,starsUI=[];
  function resizeStars(){ W=starCanvas.width=innerWidth; H=starCanvas.height=innerHeight; starsUI=Array.from({length:160},()=>({x:Math.random()*W,y:Math.random()*H,z:Math.random()*W})); }
  resizeStars();
  addEventListener("resize",resizeStars);
  (function drawStars(){
    s.fillStyle="#000"; s.fillRect(0,0,W,H);
    s.fillStyle="#4dd2ff";
    starsUI.forEach(st=>{
      st.z-=0.2; if(st.z<=0) st.z=W;
      const k=128/st.z; const x=(st.x-W/2)*k+W/2; const y=(st.y-H/2)*k+H/2;
      if(x>0&&x<W&&y>0&&y<H){ const size=(1-st.z/W)*2; s.fillRect(x,y,size,size); }
    });
    requestAnimationFrame(drawStars);
  })();
}

// ================= GEOMETRIC CHAOS BACKGROUND =================
const canvas = document.getElementById('chaosCanvas');
const ctx = canvas.getContext('2d');
const dataDiv = document.getElementById('data');
const clockDiv = document.getElementById('clock');
const statusDiv = document.getElementById('status');

function resize(){ canvas.width=window.innerWidth; canvas.height=window.innerHeight; }
window.addEventListener('resize',resize);
resize();

const startTime = Date.now();
function formatRelativeTime(ms){
  const s=Math.floor(ms/1000); if(s<60) return `+${s}s`;
  const m=Math.floor(s/60); const sec=s%60; if(m<60) return `+${m}m ${sec}s`;
  const h=Math.floor(m/60); const min=m%60; return `+${h}h ${min}m`;
}
function updateClock(){ const now=new Date(); clockDiv.innerHTML=`${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}:${String(now.getSeconds()).padStart(2,'0')}<br>${formatRelativeTime(Date.now()-startTime)}`; }
setInterval(updateClock,1000); updateClock();

// ======== FULL GEOMETRIC CHAOS LOGIC =====
// (сюди вставляється весь JS з твого першого коду: зірки, blobs, fetchRealPlanetData, drawCoordinateSystem, loop, формули)
// Також зберігаємо всі змінні, функції, анімації, без змін

</script>

<script>
// ================= MAGNETIC STORM =================
const magnetLink = document.getElementById("magnetLab");
const KP_API = "https://services.swpc.noaa.gov/products/noaa-planetary-k-index.json";

async function checkMagneticStorm() {
  try{
    const res=await fetch(KP_API,{cache:"no-store"});
    const data=await res.json();
    const last=data[data.length-1]; const kp=parseFloat(last[1]);
    if(kp>=5){ magnetLink.classList.add("magnet-storm"); magnetLink.title=`GEOMAGNETIC STORM · Kp=${kp}`; }
    else{ magnetLink.classList.remove("magnet-storm"); magnetLink.title=`Geomagnetic calm · Kp=${kp}`; }
  } catch{ console.warn("Magnetic data unavailable"); }
}
checkMagneticStorm(); setInterval(checkMagneticStorm,10*60*1000);

// ================= LINKS =================
function openSocialLive(){ window.open("https://lavandaaudit.github.io/lavanda.soft/","_blank"); }
function openCriptoLabLive(){ window.open("https://lavandaaudit.github.io/ibonarium.economy/","_blank"); }
function openIbonariumTV(){ window.open("https://lavandaaudit.github.io/history.musem.ibonarium/","_blank"); }
function openSolarStability(){ window.open("https://lavandaaudit.github.io/human.stability.calendar/","_blank"); }
function openIModular01(){ window.open("https://lavandaaudit.github.io/synthesizer/","_blank"); }
function openIModularXIII(){ window.open("https://lavandaaudit.github.io/modularxiii/","_blank"); }
function openMagnetLab(){ window.open("https://lavandaaudit.github.io/Geospace-Activity/","_blank"); }
function openIDrum32(){ window.open("https://lavandaaudit.github.io/ibonarium.drum.machine.32.v1.3/","_blank"); }
function openEcoSystem(){ window.open("https://lavandaaudit.github.io/ibonarium.eco.system.radar/","_blank"); }
function openOceanLab(){ window.open("https://lavandaaudit.github.io/ocean.ibonarium.live.lab/","_blank"); }
function openHumanityLab(){ window.open("https://lavandaaudit.github.io/Ibonarium.HUMANITY.lab.live/","_blank"); }
function openAgroLab(){ window.open("https://lavandaaudit.github.io/ibonarium.agro.ua/","_blank"); }
function openPhGeoLab(){ window.open("https://lavandaaudit.github.io/test2/","_blank"); }

// ================= TRANSLATOR =================
const translatorLink=document.getElementById("translatorLink");
translatorLink.onclick=(e)=>{ e.preventDefault(); window.open("https://lavandaaudit.github.io/live.monitor.lab/","_blank"); };
</script>

</body>
</html>
