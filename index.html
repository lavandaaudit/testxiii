ʼ<script>
// ==== НАЛАШТУВАННЯ API ====
const OPEN_WEATHER_API_KEY = "ВСТАВ_СЮДИ_СВІЙ_API_КЛЮЧ"; // Потрібно отримати на openweathermap.org
const LAT = 50.0; 
const LON = 30.0;  // координати для погоди (можеш змінити на свої)

// ==== РЕАЛЬНІ ДАНІ ====
let realData = {
  seismic:0, magnetic:0, atmosphere_wind:0, atmosphere_pressure:0,
  atmosphere_temp:0, ocean:0, solar_radiation:0, solar_wind:0,
  precipitation:0, chaos:0
};

function updateEarthquakeData(){
  // USGS API: найближчі землетруси (останні 30 хв)
  const url = "https://earthquake.usgs.gov/fdsnws/event/1/query?format=geojson&orderby=time&limit=5";
  fetch(url).then(res=>res.json()).then(json=>{
    if(json.features && json.features.length){
      const mags = json.features.map(f=>f.properties.mag).filter(m=>typeof m === "number");
      if(mags.length){
        // середня магнітуда
        const avgMag = mags.reduce((a,b)=>a+b,0)/mags.length;
        realData.seismic = Math.min(1, avgMag/8.0);
      }
    }
  }).catch(()=>{});
}

function updateWeatherData(){
  // OpenWeatherMap: погода (вітер, тиск, температура, опади)
  const urlWeather = `https://api.openweathermap.org/data/2.5/weather?lat=${LAT}&lon=${LON}&units=metric&appid=${OPEN_WEATHER_API_KEY}`;
  fetch(urlWeather).then(res=>res.json()).then(json=>{
    if(json.wind){
      realData.atmosphere_wind = Math.min(1, json.wind.speed/30);
    }
    if(json.main){
      realData.atmosphere_pressure = Math.min(1, json.main.pressure / 1020);
      realData.atmosphere_temp = Math.min(1, (json.main.temp+30)/80);
    }
    if(json.rain){
      realData.precipitation = Math.min(1, json.rain["1h"] / 10);
    } else realData.precipitation = 0;
  }).catch(()=>{});
}

function updateSpaceWeatherData(){
  // NOAA SWPC: Сонячний вітер та магнітне поле
  fetch("https://services.swpc.noaa.gov/products/summary/solar-wind-speed.json")
    .then(res=>res.json()).then(json=>{
      if(json && json.length>1){
        const last = json[json.length-1];
        realData.solar_wind = Math.min(1, last[1]/800);
      }
    }).catch(()=>{});
  fetch("https://services.swpc.noaa.gov/products/summary/solar-wind-mag-field.json")
    .then(res=>res.json()).then(json=>{
      if(json && json.length>1){
        const last = json[json.length-1];
        realData.magnetic = Math.min(1, Math.abs(last[1])/100);
      }
    }).catch(()=>{});
}

// ==== ЦИКЛ ОНОВЛЕННЯ ====
function fetchAllRealData(){
  updateEarthquakeData();
  updateWeatherData();
  updateSpaceWeatherData();
}
fetchAllRealData();
setInterval(fetchAllRealData, 30000); // кожні 30 сек

// ==== HUD ОНОВЛЕННЯ ====
function updateHUD(){
  let html = `
    seismic: ${ (realData.seismic*100).toFixed(1) }%<br>
    magnetic: ${ (realData.magnetic*100).toFixed(1) }%<br>
    atmosphere_wind: ${ (realData.atmosphere_wind*100).toFixed(1) }%<br>
    atmosphere_pressure: ${ (realData.atmosphere_pressure*100).toFixed(1) }%<br>
    atmosphere_temp: ${ (realData.atmosphere_temp*100).toFixed(1) }%<br>
    solar_wind: ${ (realData.solar_wind*100).toFixed(1) }%<br>
    precipitation: ${ (realData.precipitation*100).toFixed(1) }%
  `;
  document.getElementById("data").innerHTML = html;
}
setInterval(updateHUD, 1000);
</script>

