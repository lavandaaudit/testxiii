<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>GEOMETRIC CHAOS · LIVE DATA</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html, body {
  margin:0; padding:0;
  width:100%; height:100%;
  background:#000;
  color:#0af;
  font-family:"Courier New", monospace;
  overflow:hidden;
}
canvas { position:fixed; inset:0; z-index:0; }
.wrapper {
  position:relative; z-index:2; height:100%;
  display:flex; flex-direction:column;
  justify-content:center; align-items:center;
  gap:18px; text-align:center; padding:20px;
}
.player, .links { z-index:2; }
button {
  width:78px; height:78px; border-radius:50%;
  border:1px solid #4dd2ff; background:transparent;
  color:#4dd2ff; font-size:26px; cursor:pointer;
  transition:.3s;
}
button:hover { background: rgba(77,210,255,.15); box-shadow:0 0 22px rgba(77,210,255,.6); }
input[type="range"] { -webkit-appearance:none; width:120px; height:2px; background:#4dd2ff; outline:none; opacity:0.7; }
input[type="range"]::-webkit-slider-thumb { -webkit-appearance:none; width:12px; height:12px; border-radius:50%; background:#4dd2ff; cursor:pointer; }

#hud { position:absolute; top:16px; left:16px; font-size:13px; opacity:0.7; pointer-events:none; }
#clock { position:absolute; bottom:16px; right:16px; font-size:11px; opacity:0.45; color:#6cf; pointer-events:none; text-align:right; }
#status { position:absolute; top:40px; left:16px; font-size:11px; opacity:0.6; color:#0af; }
#data { position:absolute; top:60px; left:16px; width:220px; font-size:10px; opacity:0.6; pointer-events:none; line-height:1.4; }
</style>
</head>
<body>
<canvas id="c"></canvas>
<div id="hud">GEOMETRIC CHAOS · LIVE DATA</div>
<div id="status">ініціалізація даних...</div>
<div id="data"></div>
<div id="clock"></div>

<div class="wrapper">
  <div class="player">
    <button id="play">▶</button>
    <input type="range" id="volume" min="0" max="1" step="0.01" value="0.7">
  </div>
</div>

<audio id="audio" crossorigin="anonymous" preload="none">
  <source src="https://ice1.somafm.com/dronezone-128-mp3">
</audio>

<script>
// ================= AUDIO =================
const audio = document.getElementById("audio");
const playBtn = document.getElementById("play");
const volume = document.getElementById("volume");
let playing=false;
volume.oninput=()=>audio.volume=volume.value;
playBtn.onclick=()=>{
  if(!playing){ audio.play(); playBtn.textContent="■"; playing=true; }
  else { audio.pause(); playBtn.textContent="▶"; playing=false; }
};

// ================= CLOCK =================
const clockDiv=document.getElementById('clock');
function updateClock(){
  const now=new Date();
  clockDiv.innerHTML = `${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}:${String(now.getSeconds()).padStart(2,'0')}`;
}
setInterval(updateClock,1000);
updateClock();

// ================= CANVAS =================
const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');
function resizeCanvas(){ canvas.width=window.innerWidth; canvas.height=window.innerHeight; }
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

// ================= SIMULATED DATA =================
const params = ['seismic','magnetic','wind','temperature','solar','solar_wind','precipitation'];
let dataHistory = {};
params.forEach(p=>dataHistory[p]=[]);
function generateData(){
  const d = {};
  params.forEach(p=> d[p] = Math.random());
  return d;
}

// ================= ANIMATION =================
const stars = Array.from({length:200},()=>({x:Math.random()*canvas.width, y:Math.random()*canvas.height, size:Math.random()*1.5+0.5, alpha:Math.random()*0.5+0.2}));

let t=0;
function loop(){
  t+=0.016;
  ctx.fillStyle='rgba(0,0,0,0.08)'; ctx.fillRect(0,0,canvas.width,canvas.height);

  // --- stars ---
  stars.forEach(s=>{
    const a = Math.sin(t*2+s.x*0.01)*0.3+s.alpha;
    ctx.fillStyle=`rgba(200,255,255,${a})`;
    ctx.fillRect(s.x,s.y,s.size,s.size);
  });

  // --- central geometric chaos ---
  const cx = canvas.width/2, cy=canvas.height/2;
  for(let i=0;i<5;i++){
    const sides = 3+i+Math.floor(Math.sin(t*0.5)*3);
    const r = 80+i*30+Math.sin(t*0.3+i)*20;
    ctx.beginPath();
    for(let s=0;s<sides;s++){
      const a = (Math.PI*2/sides)*s+t*0.5*i;
      const x = cx+Math.cos(a)*r;
      const y = cy+Math.sin(a)*r;
      s===0?ctx.moveTo(x,y):ctx.lineTo(x,y);
    }
    ctx.closePath();
    ctx.strokeStyle=`rgba(${50+i*30},${100+i*30},${200-i*20},0.08)`;
    ctx.lineWidth=1.2;
    ctx.stroke();
  }

  // --- left linear graphs ---
  const graphX = 50, graphY = 50, graphW = 180, graphH = canvas.height-100;
  ctx.strokeStyle='rgba(77,210,255,0.6)';
  ctx.lineWidth=1.2;
  ctx.font="10px Courier New";
  ctx.fillStyle="#0af";
  ctx.fillText("Live Data",graphX,graphY-10);

  params.forEach((p,idx)=>{
    // append simulated data
    const val = generateData()[p];
    dataHistory[p].push(val);
    if(dataHistory[p].length>graphW) dataHistory[p].shift();

    // draw line
    ctx.beginPath();
    dataHistory[p].forEach((v,i)=>{
      const x = graphX+i;
      const y = graphY+idx*15 + (1-v)*12;
      i===0?ctx.moveTo(x,y):ctx.lineTo(x,y);
    });
    ctx.strokeStyle=`hsl(${idx*50},80%,60%)`;
    ctx.stroke();

    // update text
    document.getElementById('data').innerHTML+=`${p}: ${val.toFixed(2)}<br>`;
  });
  // clear old text
  setTimeout(()=>document.getElementById('data').innerHTML='',100);

  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
